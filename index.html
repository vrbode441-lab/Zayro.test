<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZayroX_Anime</title>
<style>
  body {margin:0; font-family:'Segoe UI',sans-serif; background:linear-gradient(135deg,#111,#222); color:#fff; padding:20px;}
  h1{text-align:center; color:#4ec9ff; font-size:32px; margin-bottom:20px;}
  .container{max-width:1000px; margin:auto;}
  .cards{display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px;}
  .card{background:#1a1a1a; border-radius:16px; padding:15px; box-shadow:0 0 20px rgba(0,0,0,0.4); cursor:pointer; transition:0.3s; position:relative;}
  .card img{width:100%; border-radius:12px;}
  .card h2{margin:10px 0; font-size:22px; color:#4ec9ff;}
  .card .visitors{position:absolute; top:10px; left:10px; font-size:14px; background:rgba(0,0,0,0.6); padding:5px 10px; border-radius:10px;}
  #quizContainer{display:none; margin-top:20px;}
  .question{margin-bottom:20px;}
  label{display:block; margin-bottom:10px; font-size:18px;}
  select{width:100%; padding:10px; border-radius:10px; font-size:16px;}
  .btn{background:#4ec9ff; color:#000; padding:12px 20px; border:none; border-radius:12px; font-size:18px; cursor:pointer; margin-top:15px;}
  .btn:hover{background:#3bb0e0;}
  #resultBox{display:none; background:#000; padding:20px; border-radius:16px; margin-top:20px;}
  .title{color:#4ec9ff; font-size:20px; margin-bottom:8px;}
  .watermark{position:fixed; bottom:10px; right:10px; font-size:12px; color:rgba(255,255,255,0.3); user-select:none;}
  .progress{height:12px; background:#333; border-radius:8px; margin-bottom:20px; overflow:hidden;}
  .progress-bar{height:100%; width:0%; background:#4ec9ff; transition:0.5s;}
  @media(max-width:480px){h1{font-size:26px;}}
</style>
</head>
<body>
<h1>ZayroX_Anime</h1>
<div class="container">
  <div class="cards" id="animeCards"></div>
  <div id="quizContainer">
    <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
    <div id="quiz"></div>
    <button class="btn" id="nextBtn" onclick="next()">ابدأ</button>
    <div id="resultBox"></div>
  </div>
</div>
<div class="watermark">المطور: عبدالرحمن أنور</div>

<script>
// قائمة الأنميات
const animes = [
  {name:"Naruto", img:"https://upload.wikimedia.org/wikipedia/en/9/94/NarutoCoverTankobon1.jpg"},
  {name:"Attack on Titan", img:"https://upload.wikimedia.org/wikipedia/en/0/0d/Shingeki_no_Kyojin_manga_volume_1.jpg"},
  {name:"Demon Slayer", img:"https://upload.wikimedia.org/wikipedia/en/9/9f/Kimetsu_no_Yaiba_vol01.jpg"},
  {name:"Jujutsu Kaisen", img:"https://upload.wikimedia.org/wikipedia/en/0/0e/Jujutsu_Kaisen_Volume_1.jpg"},
  {name:"Bleach", img:"https://upload.wikimedia.org/wikipedia/en/3/3e/Bleach_cover.jpg"},
  {name:"Hunter x Hunter", img:"https://upload.wikimedia.org/wikipedia/en/6/61/Hunter_X_Hunter_cover.jpg"},
  {name:"Solo Leveling", img:"https://upload.wikimedia.org/wikipedia/en/6/66/Solo_Leveling.jpg"},
  {name:"My Hero Academia", img:"https://upload.wikimedia.org/wikipedia/en/5/5a/Boku_no_Hero_Academia_volume_1.jpg"},
  {name:"Dragon Ball", img:"https://upload.wikimedia.org/wikipedia/en/f/f4/Dragon_Ball_volume_1_cover.jpg"},
  {name:"Tokyo Ghoul", img:"https://upload.wikimedia.org/wikipedia/en/1/1e/Tokyo_Ghoul_vol_1.jpg"},
  {name:"Black Clover", img:"https://upload.wikimedia.org/wikipedia/en/9/9b/Black_Clover_volume_1.jpg"},
  {name:"Mixed Anime Quiz", img:"https://upload.wikimedia.org/wikipedia/en/e/e0/Anime_icon.jpg"}
];

const visitorCounts = {};
const animeCards = document.getElementById('animeCards');
animes.forEach(anime=>{
  if(!localStorage.getItem(anime.name)) localStorage.setItem(anime.name,0);
  visitorCounts[anime.name] = parseInt(localStorage.getItem(anime.name));
  const card = document.createElement('div');
  card.className='card';
  card.innerHTML=`<div class="visitors">${visitorCounts[anime.name]} زائر</div><img src="${anime.img}"><h2>${anime.name}</h2>`;
  card.onclick=()=>selectLevel(anime.name);
  animeCards.appendChild(card);
});

// أسئلة كمثال لكل أنمي والمستويات
const questionsData = {
  "Naruto":{
    "سهل":[
      {q:"من هو بطل ناروتو؟", opts:["ناروتو","ساكورا","ساسكي","كاكاشي"], correct:0},
      {q:"اسم كلب كاكاشي؟", opts:["باك","باكو","بينا","نوبو"], correct:1},
      {q:"النينجا من قرية الورق؟", opts:["ناروتو","ساسكي","كاكاشي","هينو"], correct:0}
    ],
    "متوسط":[
      {q:"من هو معلم ناروتو؟", opts:["كاكاشي","جيرايا","هيرو","سابو"], correct:1},
      {q:"أقوى شخصية في ناروتو شيبودن؟", opts:["ناروتو","ساسكي","مدارا","هيرو"], correct:2}
    ],
    "صعب":[
      {q:"من هو أصغر هوكاجي؟", opts:["ناروتو","تسونا","كاكاشي","ميناتو"], correct:3},
      {q:"كم من الذيل يمتلك كيوبي؟", opts:["9","8","7","6"], correct:0}
    ]
  }
};

// المتغيرات العامة
let currentAnime = "";
let currentLevel = "";
let current = 0;
let rawScore = 0;
let startTime = null;
let quizQuestions = [];

function selectLevel(animeName){
  currentAnime = animeName;
  // زيادة الزوار
  visitorCounts[animeName]++;
  localStorage.setItem(animeName,visitorCounts[animeName]);
  animeCards.innerHTML="";
  // اختيار المستوى
  animeCards.innerHTML=`<h2 style="text-align:center;margin-bottom:15px;">اختر المستوى لـ ${animeName}</h2>
  <button class="btn" onclick="startQuiz('سهل')">سهل</button>
  <button class="btn" onclick="startQuiz('متوسط')">متوسط</button>
  <button class="btn" onclick="startQuiz('صعب')">صعب</button>
  <div class="watermark">المطور: عبدالرحمن أنور</div>`;
}

function startQuiz(level){
  currentLevel=level;
  current=0;
  rawScore=0;
  quizQuestions=questionsData[currentAnime]?[currentLevel]:[];
  document.getElementById('quizContainer').style.display='block';
  loadQuestion();
}

function loadQuestion(){
  const q=quizQuestions[current];
  if(!q) return;
  startTime=Date.now();
  document.getElementById('quiz').innerHTML=`<div class="question"><label>${current+1}. ${q.q}</label>
  <select id="answer">${q.opts.map((opt,i)=>`<option value="${i}">${opt}</option>`).join('')}</select></div>`;
  document.getElementById('nextBtn').innerText=current===quizQuestions.length-1?"إظهار النتيجة":"التالي";
  document.getElementById('progressBar').style.width=((current+1)/quizQuestions.length*100)+"%";
}

function next(){
  const q=quizQuestions[current];
  if(q){
    const ans=Number(document.getElementById("answer").value);
    if(ans===q.correct) rawScore++;
  }
  current++;
  if(current<quizQuestions.length) loadQuestion();
  else showResult();
}

function showResult(){
  const iq=Math.round((rawScore/quizQuestions.length)*140);
  const result=document.getElementById('resultBox');
  result.style.display="block";
  result.innerHTML=`<div class="title">IQ: ${iq}</div>
  <div class="title">درجة الاختبار: ${rawScore} من ${quizQuestions.length}</div>`;
  document.getElementById('nextBtn').style.display='none';
}
</script>
</body>
</html>
